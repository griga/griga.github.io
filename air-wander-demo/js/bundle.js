;window.AIRWANDER_GLOBALS={environment: "prod"};!function(){"use strict";angular.element(document).ready(function(){angular.bootstrap(document,["app"])})}(),function(){"use strict";angular.module("app",["ngAnimate","ngMessages","ngAria","ngMaterial","ui.router","app.auth","app.layout","app.welcome","app.dashboard","api.mocks"]).config(["$mdThemingProvider",function(e){var a=e.extendPalette("indigo",{300:"4456d5",400:"4456d5",500:"4456d5",700:"4456d5"});e.definePalette("airBlue",a);var n=e.extendPalette("pink",{300:"ff1f4a",400:"ff1f4a",500:"ff1f4a",700:"ff1f4a"});e.definePalette("airRed",n),e.theme("default").primaryPalette("airBlue",{"default":"400"}).accentPalette("airRed")}]).run(function(){})}(),function(){"use strict";var e=[{id:"1234-1234-2",firstName:"John",lastName:"Doe",age:"25",email:"jdoe@gmail.com",counters:{favorites:6,booked:67,bucket_list:8,search_history:7,alerts:7}},{id:"1234-1234-1",firstName:"Yura",lastName:"Griga",age:"31",email:"grigach@gmail.com"}];angular.module("api.mocks",["ngMockE2E"]).run(["$httpBackend","UserApiMock",function(e,a){e.when("GET","/users").respond(function(e,n,i){var s=a.findAll();return[200,s,{}]}),e.when("GET",/\/user\/\d+/).respond(function(e,n,i){var s=n.split("/")[2],o=a.findOne(s);return[200,o,{}]}),e.whenPOST("/login").respond(function(e,n,i){var s=angular.fromJson(i);return[200,Object.assign(a.findOne(s.email),s)]}),e.whenPOST("/signup").respond(function(e,n,i){var s=angular.fromJson(i);return[200,Object.assign(a.findOne(s.email),s)]})}]).factory("UserApiMock",function(){return{findAll:function(){return e.slice()},findOne:function(a){return Object.assign({},e[0])}}})}(),function(){"use strict";angular.module("app.auth",[]).constant("AUTH_EVENTS",{loginSuccess:"auth-login-success",loginFailed:"auth-login-failed",logoutSuccess:"auth-logout-success",sessionTimeout:"auth-session-timeout",notAuthenticated:"auth-not-authenticated",notAuthorized:"auth-not-authorized"}).constant("GUEST_STATES",["app.welcome.login","app.welcome.signup","app.welcome.signin"]).run(["$rootScope","AuthService","$state","$window","AUTH_EVENTS","GUEST_STATES",function(e,a,n,i,s,o){e.$on("$stateChangeStart",function(t,r){"prod"==i.AIRWANDER_GLOBALS.environment&&o.indexOf(r.name)<0&&!a.isAuthenticated()&&(t.preventDefault(),n.go("app.welcome.login"),e.$broadcast(s.notAuthenticated))})}]).config(["$httpProvider",function(e){e.interceptors.push(["$injector",function(e){return e.get("AuthInterceptor")}])}]).factory("AuthInterceptor",["$rootScope","$q","AUTH_EVENTS",function(e,a,n){return{responseError:function(i){return console.log("AuthInterceptor catch error",i),e.$broadcast({401:n.notAuthenticated,403:n.notAuthorized,419:n.sessionTimeout,440:n.sessionTimeout}[i.status],i),a.reject(i)}}}])}(),function(){"use strict";angular.module("app.dashboard",[]).config(["$stateProvider",function(e){e.state("app.dashboard",{url:"/dashboard",views:{"content@app":{controller:"DashboardController as vm",templateUrl:"app/dashboard/dashboard.html"}},data:{title:"Dashboard"}})}])}(),function(){"use strict";angular.module("app.layout",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(e,a){e.state("app",{"abstract":!0,views:{root:{templateUrl:"app/layout/views/layout.html"},"header@app":{templateUrl:"app/layout/views/header.html",controller:"HeaderController as header"},"footer@app":{templateUrl:"app/layout/views/footer.html"}}}),a.otherwise("/signin")}])}(),function(){"use strict";angular.module("app.welcome",[]).config(["$stateProvider",function(e){e.state("app.welcome",{"abstract":!0,views:{"header@app":{templateUrl:"app/layout/views/header-welcome.html"}}}).state("app.welcome.login",{url:"/login",views:{"content@app":{controller:"LoginController as vm",templateUrl:"app/welcome/login/login.html"}},data:{title:"Login"}}).state("app.welcome.signup",{url:"/signup",views:{"content@app":{controller:"SignupController as vm",templateUrl:"app/welcome/signup/signup.html"}},data:{title:"Sign Up"}}).state("app.welcome.signin",{url:"/signin",views:{"content@app":{controller:"SigninController as vm",templateUrl:"app/welcome/signin/signin.html"}},data:{title:"Sign In"}})}])}(),function(){"use strict";angular.module("app.auth").service("AuthService",["$http","Session","$rootScope","AUTH_EVENTS",function(e,a,n,i){var s=this;this.user=void 0,this.login=function(o){return e.post("/login",o).then(function(e){return n.$broadcast(i.loginSuccess),a.create(e.data.id),s.user=e.data,e.data},function(e){return n.$broadcast(i.loginFailed),e.data})},this.signup=function(o){return e.post("/signup",o).then(function(e){return n.$broadcast(i.loginSuccess),s.user=e.data,a.create(e.data.id),e.data},function(e){return n.$broadcast(i.loginFailed),e.data})},this.isAuthenticated=function(){return!!a.id},this.isAuthorized=function(){return s.isAuthenticated()},this.getUser=function(){return s.user}}])}(),function(){"use strict";angular.module("app.auth").service("Session",function(){var e=this;this.id=void 0,this.create=function(a){e.id=a},this.destroy=function(){e.id=void 0}})}(),function(){"use strict";angular.module("ng").run(["$templateCache",function(e){e.put("app/dashboard/dashboard.html",'<div class="aw-dashboard-page">\n    <div class="aw-dashboard-page__header">\n        <h2>Welcome on your dashboard, {{vm.user.firstName}}</h2>\n    </div>\n    <div class="aw-dashboard-page__body">\n        <div class="aw-dashboard-item">\n            <span class="aw-dashboard-item__counter" ng-if="vm.user.counters.favorites">{{vm.user.counters.favorites}}</span>\n            <div class="aw-dashboard-item__image">\n                <div class="aw-dashboard-item__image_main aw-sprite aw-image-icon_dashboard_favorites"></div>\n                <div class="aw-dashboard-item__image_hover aw-sprite aw-image-icon_dashboard_favorites_white"></div>\n            </div>\n            <h4 class="aw-dashboard-item__name">Favorites</h4>\n            <p class="aw-dashboard-item__description">Searches you bookmarked <br>\n                on the flight display</p>\n        </div>\n        <div class="aw-dashboard-item">\n            <span class="aw-dashboard-item__counter" ng-if="vm.user.counters.booked">{{vm.user.counters.booked}}</span>\n            <div class="aw-dashboard-item__image">\n                <div class="aw-dashboard-item__image_main aw-sprite aw-image-icon_dashboard_booked"></div>\n                <div class="aw-dashboard-item__image_hover aw-sprite aw-image-icon_dashboard_booked_white"></div>\n            </div>\n            <h4 class="aw-dashboard-item__name">Booked</h4>\n            <p class="aw-dashboard-item__description">All the details of your flights<br>\n                you booked</p>\n        </div>\n        <div class="aw-dashboard-item">\n            <span class="aw-dashboard-item__counter" ng-if="vm.user.counters.bucket_list">{{vm.user.counters.bucket_list}}</span>\n            <div class="aw-dashboard-item__image">\n                <div class="aw-dashboard-item__image_main aw-sprite aw-image-icon_dashboard_bucket_list"></div>\n                <div class="aw-dashboard-item__image_hover aw-sprite aw-image-icon_dashboard_bucket_list_white"></div>\n            </div>\n            <h4 class="aw-dashboard-item__name">Bucket List</h4>\n            <p class="aw-dashboard-item__description">All the places you want to visit<br>\n                to receive all the deals</p>\n        </div>\n        <div class="aw-dashboard-item">\n            <span class="aw-dashboard-item__counter" ng-if="vm.user.counters.search_history">{{vm.user.counters.search_history}}</span>\n            <div class="aw-dashboard-item__image">\n                <div class="aw-dashboard-item__image_main aw-sprite aw-image-icon_dashboard_search_history"></div>\n                <div class="aw-dashboard-item__image_hover aw-sprite aw-image-icon_dashboard_search_history_white"></div>\n            </div>\n            <h4 class="aw-dashboard-item__name">Search History</h4>\n            <p class="aw-dashboard-item__description">Recent searches you made</p>\n        </div>\n        <div class="aw-dashboard-item">\n            <span class="aw-dashboard-item__counter" ng-if="vm.user.counters.alerts">{{vm.user.counters.alerts}}</span>\n            <div class="aw-dashboard-item__image">\n                <div class="aw-dashboard-item__image_main aw-sprite aw-image-icon_dashboard_alerts"></div>\n                <div class="aw-dashboard-item__image_hover aw-sprite aw-image-icon_dashboard_alerts_white"></div>\n            </div>\n            <h4 class="aw-dashboard-item__name">Alerts</h4>\n            <p class="aw-dashboard-item__description">Receive Notifications <br> for deals for flights</p>\n        </div>\n        <div class="aw-dashboard-item">\n            <div class="aw-dashboard-item__image">\n                <div class="aw-dashboard-item__image_main aw-sprite aw-image-icon_dashboard_your_profile"></div>\n                <div class="aw-dashboard-item__image_hover aw-sprite aw-image-icon_dashboard_your_profile_white"></div>\n            </div>\n            <h4 class="aw-dashboard-item__name">Your Profile</h4>\n            <p class="aw-dashboard-item__description">your profile and settings</p>\n        </div>\n    </div>\n</div>'),e.put("app/layout/common/error-messages.html",'<div ng-message="required">\n    Field is required!\n</div>\n<div ng-message="email">\n    Email is not correct!\n</div>'),e.put("app/layout/views/footer.html",""),e.put("app/layout/views/header-welcome.html",'<nav class="aw-welcome-nav">\n    <i class="aw-sprite aw-image-icon_logo"></i>\n\n    <md-button class="aw-welcome-nav__close-btn">\n        <span>&times</span>\n    </md-button>\n</nav>'),e.put("app/layout/views/header.html",'<nav class="aw-header-nav">\n    <md-button class="aw-header-nav__btn_lg">\n       <i class="aw-sprite aw-image-icon_logo_small"></i>\n    </md-button>\n    <span class="flex"></span>\n    <md-button class="aw-header-nav__btn_sm" >\n       <i class="aw-sprite aw-image-icon_dashboard"></i>\n    </md-button>\n    <md-button class="aw-header-nav__btn_sm">\n       <i class="aw-sprite aw-image-icon_profile"></i>\n    </md-button>\n    <md-button class="aw-header-nav__btn_sm" ng-click="header.logout()">\n       <i class="aw-sprite aw-image-icon_logout"></i>\n    </md-button>\n</nav>'),e.put("app/layout/views/layout.html",'<header data-ui-view="header" id="header"></header>\n\n<section class="layout-row flex" ng-cloak>\n\n    <div data-ui-view="content" id="content" class="layout-column flex" data-autoscroll="false"></div>\n\n</section>\n\n<!--<footer data-ui-view="footer"></footer>-->\n\n\n\n'),e.put("app/welcome/login/login.html",'<div class="welcome-page">\n    <div class="welcome-page__header">\n        <h2>Welcome back!</h2>\n    </div>\n    <div class="welcome-page__body">\n        <form class="aw-form" name="modelForm"\n              ng-class="{\'ng-submitted\': modelForm.$submitted}" novalidate>\n            <div class="aw-form__input-container">\n                <input ng-model="vm.model.email"  name="email" placeholder="Email" ng-required="true" type="email">\n                <div class="aw-form__messages" ng-messages="modelForm.email.$error" ng-if="modelForm.email.$error  && modelForm.$submitted"><div ng-messages-include="app/layout/common/error-messages.html"></div></div>\n            </div>\n            <div class="aw-form__input-container">\n                <input ng-model="vm.model.password" name="password" placeholder="Password" ng-required="true" type="password">\n                <div class="aw-form__messages" ng-messages="modelForm.password.$error" ng-if="modelForm.password.$error  && modelForm.$submitted"><div ng-messages-include="app/layout/common/error-messages.html"></div></div>\n            </div>\n            <div class="aw-form__input-container">\n                <md-checkbox ng-model="data.cb1" aria-label="Remember Me">\n                    Remember me\n                </md-checkbox>\n            </div>\n            <div class="aw-form__input-container">\n                <md-button ng-click="vm.submit()" class="aw-submit-btn md-raised md-accent">\n                    <md-progress-circular md-diameter="25%" ng-class="{\'aw-progress-circular_active\': vm.proccessing}" md-mode="indeterminate"></md-progress-circular>\n                    Sign in\n                </md-button>\n                <div class="aw-submit-error" ng-if="vm.submitError">\n                    {{vm.submitError}}\n                </div>\n            </div>\n\n\n        </form>\n        <hr>\n        <p>\n            Not a happy traveler yet? <br>\n            <a class="aw-action-link" ui-sref="app.welcome.signup">Sign Up</a>\n        </p>\n    </div>\n\n</div>'),e.put("app/welcome/signin/signin.html",'<div class="welcome-page">\n    <div class="welcome-page__header">\n        <h2>Welcome,</h2>\n    </div>\n    <div class="welcome-page__body">\n\n        <md-button class="aw-sprite aw-image-icon-btn welcome-page__fb-btn"><i\n                class="aw-sprite aw-image-icon-btn__icon aw-sprite aw-image-icon_fb"></i>Sign in with Facebook\n        </md-button>\n\n        <md-button class="aw-sprite aw-image-icon-btn welcome-page__twitter-btn"><i\n                class="aw-sprite aw-image-icon-btn__icon aw-sprite aw-image-icon_twitter"></i>Sign in with Twitter\n        </md-button>\n\n        <md-button class="aw-sprite aw-image-icon-btn welcome-page__google-plus-btn"><i\n                class="aw-sprite aw-image-icon-btn__icon aw-sprite aw-image-icon_google-plus"></i>Sign in with Google\n        </md-button>\n\n\n        <div class="aw-separator"><span>or</span></div>\n\n        <div class="layout-row layout-center">\n            <md-button ui-sref="app.welcome.login" class="aw-sprite aw-image-icon-btn aw-sprite aw-image-icon-btn_link welcome-page__signin-btn"><i\n                    class="aw-sprite aw-image-icon-btn__icon aw-sprite aw-image-icon_login-email"></i>signin with email\n            </md-button>\n        </div>\n\n\n        <p class="welcome-page__info-msg">\n            By signing in I agree to Airwander\'s <br>\n            <a href="#/terms-of-service">Terms of Service</a> &amp; <a href="#/privacy-policy">Privacy Policy</a>\n        </p>\n        <hr>\n        <p>\n            Already an Airwander member? <br>\n            <a class="aw-action-link" ui-sref="app.welcome.login">Login</a>\n        </p>\n    </div>\n\n</div>'),e.put("app/welcome/signup/signup.html",'<div class="welcome-page">\n    <div class="welcome-page__header">\n        <h2>Welcome,</h2>\n    </div>\n    <div class="welcome-page__body">\n        <p>Signup with <a href="#" class="aw-action-link">Facebook</a>,<br><a\n                class="aw-action-link" href="#">Google</a> or <a class="aw-action-link" href="#">Twitter</a></p>\n\n        <div class="aw-separator"><span>or</span></div>\n        <form class="aw-form" name="modelForm"\n              ng-class="{\'ng-submitted\': modelForm.$submitted}" novalidate>\n            <div class="aw-form__input-container">\n                <input ng-model="vm.model.firstName" name="firstName" placeholder="First Name" ng-required="true">\n                <div class="aw-form__messages" ng-messages="modelForm.firstName.$error"\n                     ng-if="modelForm.firstName.$error  && modelForm.$submitted">\n                    <div ng-messages-include="app/layout/common/error-messages.html"></div>\n                </div>\n            </div>\n            <div class="aw-form__input-container">\n                <input ng-model="vm.model.lastName" name="lastName" placeholder="Last Name" ng-required="true">\n                <div class="aw-form__messages" ng-messages="modelForm.lastName.$error"\n                     ng-if="modelForm.lastName.$error  && modelForm.$submitted">\n                    <div ng-messages-include="app/layout/common/error-messages.html"></div>\n                </div>\n            </div>\n            <div class="aw-form__input-container">\n                <input ng-model="vm.model.email" name="email" placeholder="Email" ng-required="true" type="email">\n                <div class="aw-form__messages" ng-messages="modelForm.email.$error"\n                     ng-if="modelForm.email.$error  && modelForm.$submitted">\n                    <div ng-messages-include="app/layout/common/error-messages.html"></div>\n                </div>\n            </div>\n            <div class="aw-form__input-container">\n                <input ng-model="vm.model.password" name="password" placeholder="Password" ng-required="true"\n                       type="password">\n                <div class="aw-form__messages" ng-messages="modelForm.password.$error"\n                     ng-if="modelForm.password.$error  && modelForm.$submitted">\n                    <div ng-messages-include="app/layout/common/error-messages.html"></div>\n                </div>\n            </div>\n            <div class="aw-form__input-container">\n                <md-checkbox ng-model="data.cb1" aria-label="Remember Me">\n                    I\'d like to receive fresh news from Airwander\n                </md-checkbox>\n            </div>\n            <div class="aw-form__input-container">\n                <p class="aw-form__submit-info-msg">\n                    By signing in I agree to Airwander\'s <br>\n                    <a href="#/terms-of-service">Terms of Service</a> &amp; <a href="#/privacy-policy">Privacy Policy</a>\n                </p>\n            </div>\n            <div class="aw-form__input-container">\n                <md-button ng-click="vm.submit()" class="aw-submit-btn md-raised md-accent">\n                    <md-progress-circular md-diameter="25%" ng-class="{\'aw-progress-circular_active\': vm.proccessing}"\n                                          md-mode="indeterminate"></md-progress-circular>\n                    Sign up\n                </md-button>\n                <div class="aw-submit-error" ng-if="vm.submitError">\n                    {{vm.submitError}}\n                </div>\n            </div>\n\n\n        </form>\n        <hr>\n        <p>\n            Already an Airwander member? <br>\n            <a class="aw-action-link" ui-sref="app.welcome.login">Login</a>\n        </p>\n    </div>\n\n</div>')}])}(),function(){"use strict";var e=function(e,a,n,i){this.user=i.getUser()};e.$inject=["$scope","$rootScope","$timeout","AuthService"],angular.module("app.dashboard").controller("DashboardController",e)}(),function(){"use strict";var e=function(e,a){this.logout=function(){e.go("app.welcome.signin")}};e.$inject=["$state","AuthService"],angular.module("app.layout").controller("HeaderController",e)}(),function(){"use strict";var e=function(e,a,n,i,s){var o=this;this.model={email:void 0,password:void 0,rememberMe:!1},this.proccessing=!1,this.submit=function(){e.modelForm.$submitted=!0,e.modelForm.$valid&&(o.proccessing=!0,i.login(o.model).then(function(e){a.$broadcast(s.loginSuccess),n.go("app.dashboard")},function(){o.submitError="Failed to login!",a.$broadcast(s.loginFailed)})["finally"](function(){o.proccessing=!1}))}};e.$inject=["$scope","$rootScope","$state","AuthService","AUTH_EVENTS"],angular.module("app.welcome").controller("LoginController",e)}(),function(){"use strict";var e=function(e,a,n,i,s){};e.$inject=["$scope","$rootScope","$state","AuthService","AUTH_EVENTS"],angular.module("app.welcome").controller("SigninController",e)}(),function(){"use strict";var e=function(e,a,n,i){var s=this;this.model={firstName:void 0,lastName:void 0,email:void 0,password:void 0,rememberMe:!1},this.proccessing=!1,this.submit=function(){e.modelForm.$submitted=!0,e.modelForm.$valid&&(s.proccessing=!0,n.signup(s.model).then(function(e){i.go("app.dashboard")},function(){s.submitError="Failed to sign up!"})["finally"](function(){s.proccessing=!1}))}};e.$inject=["$scope","$rootScope","AuthService","$state"],angular.module("app.welcome").controller("SignupController",e)}();